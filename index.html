<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherSphere Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(rgba(5, 8, 22, 0.9), rgba(5, 8, 22, 0.9)),
                        url('https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        .card {
            width: 90%;
            max-width: 480px;
            color: #ffffff;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            animation: cardSlideIn 0.6s ease-out;
            margin-bottom: 60px;
        }

        @keyframes cardSlideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #38bdf8, #22c55e, #6366f1);
            background-size: 200% 100%;
            animation: gradientFlow 3s ease infinite;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Single Line Title */
        .app-title {
            font-size: 26px;
            font-weight: 700;
            background: linear-gradient(135deg, #38bdf8, #22c55e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 20px;
            animation: titlePulse 2s ease-in-out infinite;
            line-height: 1.2;
        }

        @keyframes titlePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        /* Live Weather Map Button */
        .live-map-btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            color: white;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            margin-bottom: 15px;
            width: 100%;
            justify-content: center;
        }

        .live-map-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
        }

        .live-map-btn i {
            font-size: 15px;
            animation: satelliteSpin 4s linear infinite;
        }

        @keyframes satelliteSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Date & Time Display */
        .datetime-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .date-display {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .time-display {
            font-size: 14px;
            font-weight: 700;
            color: #38bdf8;
            background: rgba(56, 189, 248, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .time-display i {
            color: #22c55e;
            font-size: 13px;
        }

        /* Search Bar */
        .search-container {
            position: relative;
            margin-bottom: 20px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
        }

        .search-wrapper {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 3px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .search-wrapper:focus-within {
            border-color: #38bdf8;
            box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2);
            background: rgba(255, 255, 255, 0.15);
            animation: searchPulse 1.5s ease-in-out;
        }

        @keyframes searchPulse {
            0%, 100% { box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2); }
            50% { box-shadow: 0 0 0 3px rgba(56, 189, 248, 0.3); }
        }

        .search-wrapper input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            color: white;
            padding: 12px 15px;
            font-size: 15px;
            width: 100%;
        }

        .search-wrapper input::placeholder {
            color: #94a3b8;
            font-size: 14px;
        }

        .search-wrapper button {
            background: linear-gradient(135deg, #38bdf8, #22c55e);
            border: none;
            border-radius: 12px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: buttonFloat 3s ease-in-out infinite;
            flex-shrink: 0;
        }

        @keyframes buttonFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .search-wrapper button:hover {
            transform: translateX(2px) scale(1.05);
            box-shadow: 0 4px 15px rgba(56, 189, 248, 0.4);
            animation: none;
        }

        .search-wrapper button i {
            font-size: 16px;
            color: white;
        }

        /* Suggestions Dropdown */
        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            margin-top: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            display: none;
            z-index: 1000;
            max-height: 250px;
            overflow-y: auto;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .suggestions.show {
            display: block;
        }

        .suggestion-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.2s ease;
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(3px);
        }

        /* Error Message */
        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin-top: 12px;
            display: none;
            animation: shake 0.5s ease;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .error.show {
            display: block;
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 30px 0;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 45px;
            height: 45px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #38bdf8;
            border-radius: 50%;
            margin: 0 auto 15px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Weather Display */
        .weather {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .weather.show {
            display: block;
            opacity: 1;
            animation: weatherAppear 0.6s ease-out;
        }

        @keyframes weatherAppear {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .weather-icon {
            width: 120px;
            height: 120px;
            margin: 15px auto;
            position: relative;
        }

        .weather-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-12px); }
        }

        .weather-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140%;
            height: 140%;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            z-index: -1;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.2; transform: translate(-50%, -50%) scale(1.1); }
        }

        .temp {
            font-size: 65px;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff, #38bdf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 8px 0;
            animation: tempGlow 2s ease-in-out infinite alternate;
        }

        @keyframes tempGlow {
            from { text-shadow: 0 5px 15px rgba(56, 189, 248, 0.2); }
            to { text-shadow: 0 5px 20px rgba(56, 189, 248, 0.4); }
        }

        .city {
            font-size: 28px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
            animation: slideInLeft 0.6s ease-out;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .weather-desc {
            font-size: 15px;
            color: #94a3b8;
            text-transform: capitalize;
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease-out 0.2s both;
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Weather Meta Section */
        .weather-meta {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 25px;
            animation: fadeInUp 0.6s ease-out 0.4s both;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .meta-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 12px 20px;
            min-width: 140px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: boxPulse 2s ease-in-out infinite;
        }

        @keyframes boxPulse {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .meta-item:hover {
            transform: translateY(-4px);
            border-color: rgba(56, 189, 248, 0.5);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
            animation: boxPulseHover 0.5s ease;
        }

        @keyframes boxPulseHover {
            0% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(-4px); }
        }

        .meta-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #38bdf8, #22c55e);
            animation: colorFlow 3s ease infinite;
        }

        @keyframes colorFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .meta-label {
            font-size: 14px;
            color: #94a3b8;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .meta-value {
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* PINK COLOR FOR Feels Like & Temperature Range */
        .meta-item.feels-like .meta-value {
            color: #ff6b9d !important;
            font-weight: 800;
            font-size: 26px !important;
            text-shadow: 0 2px 8px rgba(255, 107, 157, 0.4);
        }

        .meta-item.temp-range .meta-value {
            color: #ff6b9d !important;
            font-weight: 800;
            font-size: 26px !important;
            text-shadow: 0 2px 8px rgba(255, 107, 157, 0.4);
        }

        /* Weather Details Section */
        .weather-details {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 18px;
            padding: 20px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }

        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .detail-item {
            text-align: left;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: boxPulse 2s ease-in-out infinite;
        }

        .detail-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
            animation: boxPulseHover 0.5s ease;
        }

        .detail-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.5), transparent);
            animation: slideIn 3s ease infinite;
        }

        @keyframes slideIn {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .detail-label {
            font-size: 13px;
            color: #38bdf8;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-value {
            font-size: 24px;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 2px 6px rgba(0,0,0,0.4);
            display: flex;
            align-items: baseline;
        }

        .detail-unit {
            font-size: 14px;
            color: #94a3b8;
            margin-left: 3px;
            font-weight: 500;
        }

        /* Specific Highlight Colors for Each Detail */
        .detail-item:nth-child(1) .detail-value { color: #60a5fa; }
        .detail-item:nth-child(2) .detail-value { color: #34d399; }
        .detail-item:nth-child(3) .detail-value { color: #a78bfa; }
        .detail-item:nth-child(4) .detail-value { color: #fbbf24; }

        .detail-item:nth-child(1) .detail-label i { color: #60a5fa; }
        .detail-item:nth-child(2) .detail-label i { color: #34d399; }
        .detail-item:nth-child(3) .detail-label i { color: #a78bfa; }
        .detail-item:nth-child(4) .detail-label i { color: #fbbf24; }

        /* Advice Section */
        .advice {
            background: linear-gradient(135deg, rgba(56, 189, 248, 0.2), rgba(34, 197, 94, 0.2));
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid #38bdf8;
            animation: fadeInUp 0.6s ease-out 0.8s both;
        }

        .advice p {
            color: #d1fae5;
            font-size: 13px;
            line-height: 1.5;
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .advice i {
            font-size: 15px;
            color: #22c55e;
            margin-top: 2px;
            animation: iconBounce 2s ease-in-out infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }

        /* Background */
        .weather-background {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: background-image 1s ease-in-out;
            z-index: -2;
        }

        /* FOOTER SECTION */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(5, 8, 22, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
        }

        .footer-text {
            color: #94a3b8;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .footer-text i {
            color: #38bdf8;
            font-size: 16px;
        }

        /* Responsive Design */
        @media (max-width: 480px) {
            .card {
                padding: 18px;
                border-radius: 20px;
                width: 95%;
                margin-bottom: 70px;
            }

            .app-title {
                font-size: 22px;
            }

            .live-map-btn {
                padding: 8px 16px;
                font-size: 13px;
            }

            .datetime-container {
                gap: 10px;
            }

            .date-display, .time-display {
                font-size: 12px;
                padding: 5px 10px;
            }

            .search-container {
                width: 95%;
            }

            .temp {
                font-size: 55px;
            }

            .city {
                font-size: 24px;
            }

            .weather-icon {
                width: 100px;
                height: 100px;
            }

            .details-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .meta-item {
                min-width: 100%;
            }

            .detail-value {
                font-size: 22px;
            }

            .meta-item.feels-like .meta-value,
            .meta-item.temp-range .meta-value {
                font-size: 24px !important;
            }

            .footer {
                padding: 12px;
            }

            .footer-text {
                font-size: 13px;
            }
        }

        @media (max-width: 768px) {
            .weather-meta {
                flex-direction: column;
                align-items: center;
            }
            
            .meta-item {
                min-width: 100%;
            }
        }

        @media (max-width: 320px) {
            .footer-text {
                font-size: 12px;
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Dynamic Background -->
    <div class="weather-background" id="weatherBackground"></div>

    <!-- Weather Card -->
    <div class="card">
        <!-- Single Line Title -->
        <h1 class="app-title">üå§Ô∏è WeatherSphere Pro</h1>

        <!-- Live Weather Map Button -->
        <a href="https://zoom.earth/maps/satellite/#view=11.83,78.852,6z" 
           target="_blank" 
           class="live-map-btn">
            <i class="fas fa-satellite"></i>
            View Live Weather Map
        </a>

        <!-- Date & Time Display -->
        <div class="datetime-container">
            <div class="date-display">
                <i class="fas fa-calendar"></i>
                <span id="currentDate">Loading...</span>
            </div>
            <div class="time-display">
                <i class="fas fa-clock"></i>
                <span id="currentTime">--:--:--</span>
            </div>
        </div>

        <!-- Search Section -->
        <div class="search-container">
            <div class="search-wrapper">
                <input type="text" id="searchInput" placeholder="Search any city (e.g., Beliatta, Colombo, Kandy)...">
                <button id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <!-- Suggestions Dropdown -->
            <div class="suggestions" id="suggestions"></div>
        </div>

        <!-- Error Message -->
        <div class="error" id="error">
            <p><i class="fas fa-exclamation-circle"></i> City not found. Please try another city.</p>
        </div>

        <!-- Loading -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Fetching weather data...</p>
        </div>

        <!-- Weather Display -->
        <div class="weather" id="weather">
            <!-- Weather Icon & Temperature -->
            <div class="weather-icon">
                <img src="" alt="Weather Icon" id="weatherIcon">
            </div>
            
            <h1 class="temp" id="temperature">--¬∞C</h1>
            <h2 class="city" id="cityName">--</h2>
            <p class="weather-desc" id="weatherDescription">--</p>

            <!-- Weather Meta -->
            <div class="weather-meta">
                <div class="meta-item feels-like">
                    <div class="meta-label">
                        <i class="fas fa-temperature-half"></i>
                        Feels Like
                    </div>
                    <div class="meta-value" id="feelsLike">--¬∞C</div>
                </div>
                <div class="meta-item temp-range">
                    <div class="meta-label">
                        <i class="fas fa-thermometer"></i>
                        Temperature Range
                    </div>
                    <div class="meta-value" id="tempRange">--¬∞C - --¬∞C</div>
                </div>
            </div>

            <!-- Weather Details -->
            <div class="weather-details">
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">
                            <i class="fas fa-tint"></i>
                            Humidity
                        </div>
                        <div class="detail-value" id="humidity">--<span class="detail-unit">%</span></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <i class="fas fa-wind"></i>
                            Wind Speed
                        </div>
                        <div class="detail-value" id="windSpeed">--<span class="detail-unit">km/h</span></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <i class="fas fa-cloud"></i>
                            Cloud Cover
                        </div>
                        <div class="detail-value" id="cloudCover">--<span class="detail-unit">%</span></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">
                            <i class="fas fa-eye"></i>
                            Visibility
                        </div>
                        <div class="detail-value" id="visibility">--<span class="detail-unit">km</span></div>
                    </div>
                </div>
            </div>

            <!-- Advice -->
            <div class="advice">
                <p><i class="fas fa-lightbulb"></i> <span id="adviceText">Search for a city to get weather advice.</span></p>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
        <div class="footer-text">
            <i class="fas fa-copyright"></i>
            <span>¬© Dulana Chathurma All Rights Reserved</span>
        </div>
    </div>

    <script>
        // API Configuration
        const API_KEY = "7539235f9b251bcc6a6abe68425e949b";
        const API_URL = "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";

        // DOM Elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const suggestions = document.getElementById('suggestions');
        const errorDiv = document.getElementById('error');
        const loadingDiv = document.getElementById('loading');
        const weatherDiv = document.getElementById('weather');
        const weatherBackground = document.getElementById('weatherBackground');
        const currentDate = document.getElementById('currentDate');
        const currentTime = document.getElementById('currentTime');
        const weatherIcon = document.getElementById('weatherIcon');

        // Popular cities for suggestions - Beliatta added as first option
        const popularCities = [
            // Sri Lankan Cities - Beliatta first
            { name: 'Beliatta', country: 'Sri Lanka' },
            { name: 'Colombo', country: 'Sri Lanka' },
            { name: 'Kandy', country: 'Sri Lanka' },
            { name: 'Galle', country: 'Sri Lanka' },
            { name: 'Jaffna', country: 'Sri Lanka' },
            { name: 'Anuradhapura', country: 'Sri Lanka' },
            { name: 'Trincomalee', country: 'Sri Lanka' },
            { name: 'Batticaloa', country: 'Sri Lanka' },
            { name: 'Matara', country: 'Sri Lanka' },
            { name: 'Ratnapura', country: 'Sri Lanka' },
            { name: 'Kurunegala', country: 'Sri Lanka' },
            
            // Southern Province Towns
            { name: 'Hambantota', country: 'Sri Lanka' },
            { name: 'Tangalle', country: 'Sri Lanka' },
            { name: 'Weligama', country: 'Sri Lanka' },
            { name: 'Mirissa', country: 'Sri Lanka' },
            { name: 'Unawatuna', country: 'Sri Lanka' },
            
            // Central Province Towns
            { name: 'Nuwara Eliya', country: 'Sri Lanka' },
            { name: 'Badulla', country: 'Sri Lanka' },
            { name: 'Bandarawela', country: 'Sri Lanka' },
            { name: 'Hatton', country: 'Sri Lanka' },
            
            // International Cities
            { name: 'London', country: 'UK' },
            { name: 'New York', country: 'USA' },
            { name: 'Tokyo', country: 'Japan' },
            { name: 'Paris', country: 'France' },
            { name: 'Sydney', country: 'Australia' },
            { name: 'Dubai', country: 'UAE' },
            { name: 'Singapore', country: 'Singapore' },
            { name: 'Mumbai', country: 'India' },
            { name: 'Cairo', country: 'Egypt' }
        ];

        // Beliatta Weather Data (Static example for demonstration)
        // If API doesn't have Beliatta, we can use nearby Hambantota data
        const beliattaWeatherData = {
            name: "Beliatta",
            country: "LK",
            main: {
                temp: 28,
                feels_like: 31,
                temp_min: 26,
                temp_max: 32,
                humidity: 78,
                pressure: 1013
            },
            weather: [{
                main: "Clear",
                description: "clear sky",
                icon: "01d"
            }],
            wind: {
                speed: 3.6,
                deg: 180
            },
            clouds: {
                all: 10
            },
            visibility: 10000,
            sys: {
                country: "LK"
            },
            timezone: 19800
        };

        // Local Weather Icons Mapping
        const localWeatherIcons = {
            'clear': 'clear.png',
            'clouds': 'cloud.png',
            'rain': 'Rain.png',
            'drizzle': 'drizzle.png',
            'thunderstorm': 'rain.png',
            'snow': 'rain.png',
            'mist': 'mist.png',
            'smoke': 'mist.png',
            'haze': 'mist.png',
            'dust': 'mist.png',
            'fog': 'mist.png'
        };

        // Weather condition to icon mapping
        const weatherConditionMap = {
            'clear': 'clear',
            'clouds': 'clouds',
            'rain': 'rain',
            'drizzle': 'drizzle',
            'thunderstorm': 'thunderstorm',
            'snow': 'snow',
            'mist': 'mist',
            'smoke': 'mist',
            'haze': 'mist',
            'dust': 'mist',
            'fog': 'mist'
        };

        // Beautiful background images for different weather conditions
        const backgroundImages = {
            clear: [
                'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'
            ],
            clouds: [
                'https://images.unsplash.com/photo-1501630834273-4b5604d2ee31?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1534274988757-a28bf1a57c17?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1519681393784-d120267933ba?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'
            ],
            rain: [
                'https://images.unsplash.com/photo-1438449805896-28a666819a20?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1519692933481-e162a57d6721?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'
            ],
            thunderstorm: [
                'https://images.unsplash.com/photo-1605727216801-e27ce1d0cc28?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'
            ],
            default: [
                'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'
            ]
        };

        // Initialize clock with live updating seconds
        function updateDateTime() {
            const now = new Date();
            
            // Format date with more style
            const options = { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            };
            currentDate.textContent = now.toLocaleDateString('en-US', options);
            
            // Format time with seconds
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            currentTime.textContent = `${hours}:${minutes}:${seconds}`;
            
            // Add subtle animation every second
            currentTime.style.transform = 'scale(1.05)';
            setTimeout(() => {
                currentTime.style.transform = 'scale(1)';
            }, 150);
        }

        // Update date and time every second
        setInterval(updateDateTime, 1000);
        updateDateTime(); // Initial call

        // Show suggestions based on input
        function showSuggestions(query) {
            if (!query) {
                suggestions.classList.remove('show');
                return;
            }

            const filtered = popularCities.filter(city =>
                city.name.toLowerCase().includes(query.toLowerCase()) ||
                city.country.toLowerCase().includes(query.toLowerCase())
            );

            if (filtered.length > 0) {
                suggestions.innerHTML = filtered.map(city => `
                    <div class="suggestion-item" onclick="selectSuggestion('${city.name}')">
                        <div class="suggestion-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="suggestion-text">
                            <div class="suggestion-city">${city.name}</div>
                            <div class="suggestion-country">${city.country}</div>
                        </div>
                    </div>
                `).join('');

                suggestions.classList.add('show');
            } else {
                suggestions.classList.remove('show');
            }
        }

        // Select suggestion
        function selectSuggestion(city) {
            searchInput.value = city;
            suggestions.classList.remove('show');
            checkWeather(city);
        }

        // Update background based on weather and time
        function updateBackground(weatherMain, isDay) {
            let imageSet;
            
            switch(weatherMain.toLowerCase()) {
                case 'clear':
                    imageSet = backgroundImages.clear;
                    break;
                case 'clouds':
                    imageSet = backgroundImages.clouds;
                    break;
                case 'rain':
                case 'drizzle':
                    imageSet = backgroundImages.rain;
                    break;
                case 'thunderstorm':
                    imageSet = backgroundImages.thunderstorm;
                    break;
                default:
                    imageSet = backgroundImages.default;
            }

            // Select random image from the set
            const randomImage = imageSet[Math.floor(Math.random() * imageSet.length)];
            weatherBackground.style.backgroundImage = `url("${randomImage}")`;
            
            // Add fade in effect
            weatherBackground.style.opacity = '0';
            setTimeout(() => {
                weatherBackground.style.opacity = '1';
            }, 100);
        }

        // Get weather icon from local files
        function getWeatherIcon(weatherMain, isDay) {
            const condition = weatherMain.toLowerCase();
            const iconKey = weatherConditionMap[condition] || 'clear';
            const iconFile = localWeatherIcons[iconKey] || 'clear.png';
            
            return iconFile;
        }

        // Generate advice based on weather
        function generateAdvice(temp, weatherMain, humidity, windSpeed) {
            let advice = '';
            
            if (weatherMain.toLowerCase() === 'rain' || weatherMain.toLowerCase() === 'drizzle') {
                advice = 'üåßÔ∏è Take an umbrella with you today. Perfect weather for staying indoors with a warm drink.';
            } else if (weatherMain.toLowerCase() === 'thunderstorm') {
                advice = '‚ö° Thunderstorm warning! Stay indoors, avoid open areas and tall trees. Unplug electronic devices.';
            } else if (weatherMain.toLowerCase() === 'clear') {
                if (temp > 30) {
                    advice = 'üî• Very hot day! Stay hydrated, wear light clothing, and avoid direct sun between 11 AM - 3 PM.';
                } else if (temp > 25) {
                    advice = '‚òÄÔ∏è Perfect sunny day! Great for outdoor activities. Apply sunscreen if staying outside.';
                } else if (temp < 15) {
                    advice = '‚ùÑÔ∏è Chilly weather! Wear warm clothing. Hot drinks will keep you cozy today.';
                } else {
                    advice = 'üòä Pleasant weather! Ideal for a walk or outdoor activities. Enjoy your day!';
                }
            } else if (weatherMain.toLowerCase() === 'clouds') {
                advice = '‚òÅÔ∏è Partly cloudy with comfortable temperatures. Good day for photography with soft lighting.';
            }

            if (humidity > 80) {
                advice += ' Humidity is high, making it feel warmer than actual temperature.';
            }

            if (windSpeed > 20) {
                advice += ' Windy conditions - secure loose outdoor items.';
            }

            return advice;
        }

        // Fetch and display weather with enhanced animations
        async function checkWeather(city) {
            try {
                // Show loading with animation
                loadingDiv.classList.add('show');
                weatherDiv.classList.remove('show');
                errorDiv.classList.remove('show');
                weatherDiv.style.opacity = '0';

                // Special handling for Beliatta
                let data;
                if (city.toLowerCase() === 'beliatta') {
                    // Use static data for Beliatta
                    data = beliattaWeatherData;
                } else {
                    // For other cities, use API
                    const response = await fetch(`${API_URL}${city}&appid=${API_KEY}`);
                    
                    if (!response.ok) {
                        throw new Error('City not found');
                    }
                    data = await response.json();
                }

                // Small delay to show loading animation
                await new Promise(resolve => setTimeout(resolve, 800));

                // Hide loading
                loadingDiv.classList.remove('show');

                // Calculate local time
                const utcSeconds = data.dt + data.timezone;
                const cityDate = new Date(utcSeconds * 1000);
                const isDay = cityDate.getHours() >= 6 && cityDate.getHours() < 18;

                // Update background with fade effect
                updateBackground(data.weather[0].main, isDay);

                // Update weather icon from local files
                const iconFile = getWeatherIcon(data.weather[0].main, isDay);
                weatherIcon.src = iconFile;
                
                // Animate icon appearance
                weatherIcon.style.opacity = '0';
                setTimeout(() => {
                    weatherIcon.style.opacity = '1';
                }, 100);

                // Update temperature with count-up animation
                animateValue('temperature', 0, Math.round(data.main.temp), 1000, '¬∞C');
                document.getElementById('cityName').textContent = `${data.name}, ${data.sys.country || data.country}`;
                document.getElementById('weatherDescription').textContent = data.weather[0].description;
                
                // Animate feels like and temp range
                animateValue('feelsLike', 0, Math.round(data.main.feels_like), 800, '¬∞C');
                document.getElementById('tempRange').textContent = 
                    `${Math.round(data.main.temp_min)}¬∞C - ${Math.round(data.main.temp_max)}¬∞C`;
                
                // Animate other values
                animateValue('humidity', 0, data.main.humidity, 600, '%');
                animateValue('windSpeed', 0, Math.round(data.wind.speed * 3.6), 700, 'km/h');
                animateValue('cloudCover', 0, data.clouds.all, 800, '%');
                animateValue('visibility', 0, (data.visibility / 1000).toFixed(1), 900, 'km');

                // Update advice
                const advice = generateAdvice(
                    Math.round(data.main.temp),
                    data.weather[0].main,
                    data.main.humidity,
                    data.wind.speed * 3.6
                );
                document.getElementById('adviceText').innerHTML = advice;

                // Show weather with animation
                setTimeout(() => {
                    weatherDiv.classList.add('show');
                    weatherDiv.style.opacity = '1';
                }, 300);

                // Save to recent searches
                saveToHistory(city, data.sys.country || data.country);

            } catch (error) {
                console.error('Error fetching weather:', error);
                loadingDiv.classList.remove('show');
                errorDiv.classList.add('show');
                weatherDiv.classList.remove('show');
                
                // Shake animation for error
                errorDiv.style.animation = 'none';
                setTimeout(() => {
                    errorDiv.style.animation = 'shake 0.5s ease';
                }, 10);
            }
        }

        // Value animation function
        function animateValue(elementId, start, end, duration, unit) {
            const element = document.getElementById(elementId);
            const range = end - start;
            const increment = end > start ? 1 : -1;
            const stepTime = Math.abs(Math.floor(duration / range));
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if (elementId === 'temperature') {
                    element.textContent = `${current}${unit}`;
                } else {
                    element.textContent = current;
                }
                
                if (current == end) {
                    clearInterval(timer);
                    if (elementId !== 'temperature') {
                        element.textContent = current + unit;
                    }
                }
            }, stepTime);
        }

        // Save search to history
        function saveToHistory(city, country) {
            try {
                const history = JSON.parse(localStorage.getItem('weatherHistory') || '[]');
                const newEntry = {
                    city,
                    country,
                    timestamp: new Date().toISOString()
                };

                // Remove duplicates
                const filteredHistory = history.filter(item => 
                    !(item.city.toLowerCase() === city.toLowerCase() && item.country === country)
                );

                // Add new entry at the beginning
                filteredHistory.unshift(newEntry);

                // Keep only last 10 searches
                const limitedHistory = filteredHistory.slice(0, 10);

                localStorage.setItem('weatherHistory', JSON.stringify(limitedHistory));
            } catch (error) {
                console.error('Error saving to history:', error);
            }
        }

        // Load recent searches for suggestions
        function loadRecentSearches() {
            try {
                const history = JSON.parse(localStorage.getItem('weatherHistory') || '[]');
                if (history.length > 0 && !searchInput.value) {
                    suggestions.innerHTML = `
                        <div class="suggestion-item" style="background: rgba(255,255,255,0.05);">
                            <div class="suggestion-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="suggestion-text">
                                <div class="suggestion-city">Recent Searches</div>
                            </div>
                        </div>
                        ${history.map(item => `
                            <div class="suggestion-item" onclick="selectSuggestion('${item.city}')">
                                <div class="suggestion-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="suggestion-text">
                                    <div class="suggestion-city">${item.city}</div>
                                    <div class="suggestion-country">${item.country}</div>
                                </div>
                            </div>
                        `).join('')}
                    `;
                    suggestions.classList.add('show');
                }
            } catch (error) {
                console.error('Error loading history:', error);
            }
        }

        // Event Listeners
        searchBtn.addEventListener('click', () => {
            const city = searchInput.value.trim();
            if (city) {
                checkWeather(city);
            }
        });

        searchInput.addEventListener('input', (e) => {
            showSuggestions(e.target.value);
        });

        searchInput.addEventListener('focus', () => {
            if (!searchInput.value) {
                loadRecentSearches();
            }
        });

        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                const city = searchInput.value.trim();
                if (city) {
                    checkWeather(city);
                }
            }
        });

        // Hide suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                suggestions.classList.remove('show');
            }
        });

        // Load Beliatta weather on page load
        window.addEventListener('load', () => {
            // Small delay for initial animations
            setTimeout(() => {
                checkWeather('Beliatta');
            }, 500);
            updateDateTime();
        });

        // Make functions available globally
        window.selectSuggestion = selectSuggestion;
    </script>
</body>
</html>
